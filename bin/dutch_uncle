#!/usr/bin/env ruby

#need to figure that out path
require 'dutch_uncle'

#remove clusterfuck and pry
#have it default to using a config in a directory and also take command line args
config = {}
config[:monitors] = YAML.load(File.open(File.expand_path('./config/config.yaml')))
influx = InfluxDB::Client.new("dutch_uncle_development")

#lookup how to clean this from github



server = DutchUncle::Server.new(influx, {monitors: config[:monitors]})

#trap more stuff
Signal.trap('EXIT') do
  server.stop
end

server.start
